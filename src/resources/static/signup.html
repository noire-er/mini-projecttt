<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Library Sign Up</title>
</head>
<body>

<h1>Create an account to sign up to the library!</h1>

<form action="/signup" method="post">

    <label for="name">First Name:</label>
    <input type="text" id="name" name="name" minlength="2" required />

    <label for="surname">Last Name:</label>
    <input type="text" id="surname" name="surname" minlength="2" required />

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required />

    <label for="address">Home Address:</label>
    <input type="text" id="address" name="address" required />

    <label for="password">Password:</label>
        <input type="password" id="password" name="password" minlength="8" required />

        <label for="confirm_password">Confirm Password:</label>
        <input type="password" id="confirm_password" name="confirm_password" minlength="8" required />

    <button type="submit">Sign Up</button>

</form>

<script>
// Client-side validation: check password match before submitting
document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('form');
    const password = document.getElementById('password');
    const confirm = document.getElementById('confirm_password');

    function setError(msg) {
        let el = document.getElementById('form-error');
        if (!el) {
            el = document.createElement('div');
            el.id = 'form-error';
            el.style.color = 'red';
            el.style.marginTop = '1em';
            form.appendChild(el);
        }
        el.textContent = msg;
    }

    form.addEventListener('submit', function (e) {
        // Clear previous errors
        setError('');

        if (password.value !== confirm.value) {
            e.preventDefault();
            setError('Passwords do not match.');
            confirm.focus();
            return;
        }

        // Basic password strength check (at least one upper and one lower)
        if (!/[A-Z]/.test(password.value) || !/[a-z]/.test(password.value)) {
            e.preventDefault();
            setError('Password must contain at least one uppercase and one lowercase letter.');
            password.focus();
            return;
        }
    });
});
</script>

</body>
</html>